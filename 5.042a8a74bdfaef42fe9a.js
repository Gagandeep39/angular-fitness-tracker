(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(t,n,e){"use strict";e.r(n),e.d(n,"TrainingModule",(function(){return ct}));var c=e("PCNd"),i=e("tyNb"),a=e("vQgB"),r=e("fXoL"),s=e("l7P3"),o=e("ofXK"),b=e("wZkO"),l=e("a318"),u=e("tW9Q"),m=e("XiUz"),g=e("3Pt+"),d=e("Wp6s"),f=e("kmnG"),p=e("d3UM"),h=e("FKr1"),S=e("Xa2L"),T=e("bTqV");function y(t,n){if(1&t&&(r.Tb(0,"mat-option",12),r.Bc(1),r.Sb()),2&t){const t=n.$implicit;r.lc("value",t.id),r.Cb(1),r.Dc(" ",t.name," ")}}function C(t,n){if(1&t&&(r.Tb(0,"mat-form-field",9),r.Tb(1,"mat-label"),r.Bc(2,"Select type of training"),r.Sb(),r.Tb(3,"mat-select",10),r.Ac(4,y,2,2,"mat-option",11),r.gc(5,"async"),r.Sb(),r.Sb()),2&t){const t=r.fc();r.Cb(4),r.lc("ngForOf",r.hc(5,1,t.trainings$))}}function v(t,n){1&t&&r.Ob(0,"mat-spinner")}function w(t,n){if(1&t&&(r.Tb(0,"button",13),r.Bc(1,"Start"),r.Sb()),2&t){r.fc();const t=r.qc(2);r.lc("disabled",t.invalid)}}function A(t,n){if(1&t){const t=r.Ub();r.Tb(0,"button",14),r.bc("click",(function(){return r.sc(t),r.fc().fetchExercises()})),r.Bc(1,"Retry"),r.Sb()}}let x=(()=>{class t{constructor(t,n){this.trainingService=t,this.store=n}ngOnInit(){this.fetchExercises(),this.isLoading$=this.store.select(l.b),this.trainings$=this.store.select(a.b)}fetchExercises(){this.trainingService.getAllExercises()}onStartTraining(t){this.trainingService.startExercise(t.value.exercise)}}return t.\u0275fac=function(n){return new(n||t)(r.Nb(u.a),r.Nb(s.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-new-training"]],decls:17,vars:14,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["form","ngForm"],["fxFlex.xs","100%","fxFlex.gt-xs","400px"],["fxLayoutAlign","center"],["appearance","outline",4,"ngIf"],[4,"ngIf"],["mat-stroked-button","","type","submit",3,"disabled",4,"ngIf"],["mat-stroked-button","","type","button",3,"click",4,"ngIf"],["appearance","outline"],["ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-stroked-button","","type","button",3,"click"]],template:function(t,n){if(1&t){const t=r.Ub();r.Tb(0,"section",0),r.Tb(1,"form",1,2),r.bc("ngSubmit",(function(){r.sc(t);const e=r.qc(2);return n.onStartTraining(e)})),r.Tb(3,"mat-card",3),r.Tb(4,"mat-card-title",4),r.Bc(5,"Time to start workout"),r.Sb(),r.Tb(6,"mat-card-content",4),r.Ac(7,C,6,3,"mat-form-field",5),r.gc(8,"async"),r.gc(9,"async"),r.Ac(10,v,1,0,"mat-spinner",6),r.gc(11,"async"),r.Sb(),r.Tb(12,"mat-card-actions",4),r.Ac(13,w,2,1,"button",7),r.gc(14,"async"),r.Ac(15,A,2,0,"button",8),r.gc(16,"async"),r.Sb(),r.Sb(),r.Sb(),r.Sb()}2&t&&(r.Cb(7),r.lc("ngIf",!r.hc(8,4,n.isLoading$)&&r.hc(9,6,n.trainings$)),r.Cb(3),r.lc("ngIf",r.hc(11,8,n.isLoading$)),r.Cb(3),r.lc("ngIf",r.hc(14,10,n.trainings$)),r.Cb(2),r.lc("ngIf",!r.hc(16,12,n.trainings$)))},directives:[m.c,m.b,g.u,g.o,g.p,d.a,m.a,d.e,d.c,o.m,d.b,f.c,f.g,p.a,g.n,g.q,g.s,o.l,h.n,S.b,T.a],pipes:[o.b],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();var I=e("+0xr"),D=e("Dh3D"),O=e("M9IT"),B=e("qFsG");function $(t,n){if(1&t){const t=r.Ub();r.Tb(0,"mat-form-field"),r.Tb(1,"input",5),r.bc("input",(function(n){return r.sc(t),r.fc().doFilter(n.target.value)})),r.Sb(),r.Sb()}}function L(t,n){1&t&&r.Ob(0,"mat-spinner")}function k(t,n){1&t&&(r.Tb(0,"th",17),r.Bc(1," Id. "),r.Sb())}function R(t,n){if(1&t&&(r.Tb(0,"td",18),r.Bc(1),r.Sb()),2&t){const t=n.$implicit;r.Cb(1),r.Dc(" ",t.id," ")}}function N(t,n){1&t&&(r.Tb(0,"th",17),r.Bc(1," Name "),r.Sb())}function E(t,n){if(1&t&&(r.Tb(0,"td",18),r.Bc(1),r.Sb()),2&t){const t=n.$implicit;r.Cb(1),r.Dc(" ",t.name," ")}}function F(t,n){1&t&&(r.Tb(0,"th",17),r.Bc(1," Duration "),r.Sb())}function M(t,n){if(1&t&&(r.Tb(0,"td",18),r.Bc(1),r.gc(2,"number"),r.Sb()),2&t){const t=n.$implicit;r.Cb(1),r.Dc(" ",r.hc(2,1,t.duration)," ")}}function H(t,n){1&t&&(r.Tb(0,"th",17),r.Bc(1," Calories "),r.Sb())}function P(t,n){if(1&t&&(r.Tb(0,"td",18),r.Bc(1),r.gc(2,"number"),r.Sb()),2&t){const t=n.$implicit;r.Cb(1),r.Dc(" ",r.hc(2,1,t.calories)," ")}}function Q(t,n){1&t&&(r.Tb(0,"th",17),r.Bc(1," Date "),r.Sb())}function j(t,n){if(1&t&&(r.Tb(0,"td",18),r.Bc(1),r.gc(2,"date"),r.Sb()),2&t){const t=n.$implicit;r.Cb(1),r.Dc(" ",r.ic(2,1,1e3*t.date.seconds,"yyyy/MM/dd h:mm:ss a")," ")}}function q(t,n){1&t&&(r.Tb(0,"th",17),r.Bc(1," State "),r.Sb())}function z(t,n){if(1&t&&(r.Tb(0,"td",18),r.Bc(1),r.Sb()),2&t){const t=n.$implicit;r.Cb(1),r.Dc(" ",t.state," ")}}function K(t,n){1&t&&r.Ob(0,"tr",19)}function U(t,n){1&t&&r.Ob(0,"tr",20)}function _(t,n){if(1&t&&(r.Tb(0,"table",6),r.Rb(1,7),r.Ac(2,k,2,0,"th",8),r.Ac(3,R,2,1,"td",9),r.Qb(),r.Rb(4,10),r.Ac(5,N,2,0,"th",8),r.Ac(6,E,2,1,"td",9),r.Qb(),r.Rb(7,11),r.Ac(8,F,2,0,"th",8),r.Ac(9,M,3,3,"td",9),r.Qb(),r.Rb(10,12),r.Ac(11,H,2,0,"th",8),r.Ac(12,P,3,3,"td",9),r.Qb(),r.Rb(13,13),r.Ac(14,Q,2,0,"th",8),r.Ac(15,j,3,4,"td",9),r.Qb(),r.Rb(16,14),r.Ac(17,q,2,0,"th",8),r.Ac(18,z,2,1,"td",9),r.Qb(),r.Ac(19,K,1,0,"tr",15),r.Ac(20,U,1,0,"tr",16),r.Sb()),2&t){const t=r.fc();r.lc("dataSource",t.dataSource),r.Cb(19),r.lc("matHeaderRowDef",t.displayedColumns),r.Cb(1),r.lc("matRowDefColumns",t.displayedColumns)}}const G=function(){return[5,10,20]};let X=(()=>{class t{constructor(t,n){this.trainingService=t,this.store=n,this.dataSource=new I.k,this.displayedColumns=["date","name","duration","calories","state"]}ngOnInit(){this.trainingService.getExerciseHistory(),this.store.select(a.c).subscribe(t=>this.dataSource.data=t),this.isLoading$=this.store.select(l.b)}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(n){return new(n||t)(r.Nb(u.a),r.Nb(s.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-past-training"]],viewQuery:function(t,n){var e;1&t&&(r.Ec(D.a,!0),r.Ec(O.a,!0)),2&t&&(r.pc(e=r.cc())&&(n.sort=e.first),r.pc(e=r.cc())&&(n.paginator=e.first))},decls:9,vars:11,consts:[[1,"mat-elevation-z8"],["fxLayoutAlign","center center",1,"mat-elevation-z0"],[4,"ngIf"],["mat-table","","matSort","",3,"dataSource",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions"],["matInput","","type","text","placeholder","Filter",3,"input"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","duration"],["matColumnDef","calories"],["matColumnDef","date"],["matColumnDef","state"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(r.Tb(0,"div",0),r.Tb(1,"mat-card",1),r.Ac(2,$,2,0,"mat-form-field",2),r.gc(3,"async"),r.Ac(4,L,1,0,"mat-spinner",2),r.gc(5,"async"),r.Sb(),r.Ac(6,_,21,3,"table",3),r.gc(7,"async"),r.Ob(8,"mat-paginator",4),r.Sb()),2&t&&(r.Cb(2),r.lc("ngIf",!r.hc(3,4,n.isLoading$)),r.Cb(2),r.lc("ngIf",r.hc(5,6,n.isLoading$)),r.Cb(2),r.lc("ngIf",!r.hc(7,8,n.isLoading$)),r.Cb(2),r.lc("pageSizeOptions",r.mc(10,G)))},directives:[d.a,m.b,o.m,O.a,f.c,B.b,S.b,I.j,D.a,I.c,I.e,I.b,I.g,I.i,I.d,D.b,I.a,I.f,I.h],pipes:[o.b,o.f,o.e],styles:["table[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]{margin-bottom:16px}mat-card[_ngcontent-%COMP%]{border-radius:0}"]}),t})();var J=e("0IaG");let V=(()=>{class t{constructor(t){this.passedData=t}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(r.Nb(J.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,n){1&t&&(r.Tb(0,"h1",0),r.Bc(1,"Are you sure"),r.Sb(),r.Tb(2,"div",1),r.Tb(3,"p"),r.Bc(4),r.Sb(),r.Sb(),r.Tb(5,"div",2),r.Tb(6,"button",3),r.Bc(7,"Yes"),r.Sb(),r.Tb(8,"button",3),r.Bc(9,"No"),r.Sb(),r.Sb()),2&t&&(r.Cb(4),r.Dc("You already got ",null==n.passedData?null:n.passedData.progress,"%"),r.Cb(2),r.lc("mat-dialog-close",!0),r.Cb(2),r.lc("mat-dialog-close",!1))},directives:[J.g,J.e,J.c,T.a,J.d],styles:[""]}),t})();var W=e("IzEk");let Y=(()=>{class t{constructor(t,n,e){this.dialog=t,this.trainingService=n,this.store=e,this.progress=0,this.timer=null}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){this.store.select(a.a).pipe(Object(W.a)(1)).subscribe(t=>{this.timer=setInterval(()=>{this.progress+=1,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t.duration/100*1e3)})}onStop(){clearInterval(this.timer),this.dialog.open(V,{data:{progress:this.progress}}).afterClosed().subscribe(t=>t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer())}}return t.\u0275fac=function(n){return new(n||t)(r.Nb(J.b),r.Nb(u.a),r.Nb(s.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,n){1&t&&(r.Tb(0,"section",0),r.Ob(1,"mat-spinner",1),r.Tb(2,"h1"),r.Bc(3),r.Sb(),r.Tb(4,"p"),r.Bc(5,"Keep Going, you are doing great job!"),r.Sb(),r.Tb(6,"button",2),r.bc("click",(function(){return n.onStop()})),r.Bc(7,"Stop"),r.Sb(),r.Sb()),2&t&&(r.Cb(1),r.lc("value",n.progress),r.Cb(2),r.Dc("",n.progress,"%"))},directives:[m.c,m.b,S.b,T.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();function Z(t,n){1&t&&(r.Tb(0,"mat-tab-group"),r.Tb(1,"mat-tab",1),r.Ob(2,"app-new-training"),r.Sb(),r.Tb(3,"mat-tab",2),r.Ob(4,"app-past-training"),r.Sb(),r.Sb())}function tt(t,n){1&t&&r.Ob(0,"app-current-training")}const nt=[{path:"",component:(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.ongoingTraining$=this.store.select(a.d)}}return t.\u0275fac=function(n){return new(n||t)(r.Nb(s.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-training"]],decls:4,vars:6,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercises"]],template:function(t,n){1&t&&(r.Ac(0,Z,5,0,"mat-tab-group",0),r.gc(1,"async"),r.Ac(2,tt,1,0,"app-current-training",0),r.gc(3,"async")),2&t&&(r.lc("ngIf",!r.hc(1,2,n.ongoingTraining$)),r.Cb(2),r.lc("ngIf",r.hc(3,4,n.ongoingTraining$)))},directives:[o.m,b.b,b.a,x,X,Y],pipes:[o.b],styles:[""]}),t})()}];let et=(()=>{class t{}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(n){return new(n||t)},imports:[[i.c.forChild(nt)],i.c]}),t})(),ct=(()=>{class t{}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(n){return new(n||t)},imports:[[c.a,et,s.b.forFeature("training",a.e)]]}),t})()}}]);